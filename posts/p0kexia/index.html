<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>P0课下提交 | coder0xe's blog</title><meta name=keywords content="计组"><meta name=description content="P0课下提交"><meta name=author content="sudo"><link rel=canonical href=https://coder0xe.github.io/posts/p0kexia/><link crossorigin=anonymous href=/assets/css/stylesheet.e4a36188e2c44563c1cc5ed1a2d0b8451a4f68c685114d738b97609f82dae050.css integrity="sha256-5KNhiOLERWPBzF7RotC4RRpPaMaFEU1zi5dgn4La4FA=" rel="preload stylesheet" as=style><link rel=icon href=https://coder0xe.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://coder0xe.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://coder0xe.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://coder0xe.github.io/apple-touch-icon.png><link rel=mask-icon href=https://coder0xe.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://coder0xe.github.io/posts/p0kexia/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://coder0xe.github.io/posts/p0kexia/"><meta property="og:site_name" content="coder0xe's blog"><meta property="og:title" content="P0课下提交"><meta property="og:description" content="P0课下提交"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-02T12:56:53+08:00"><meta property="article:modified_time" content="2023-10-02T12:56:53+08:00"><meta property="article:tag" content="Oct"><meta name=twitter:card content="summary"><meta name=twitter:title content="P0课下提交"><meta name=twitter:description content="P0课下提交"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://coder0xe.github.io/posts/"},{"@type":"ListItem","position":2,"name":"P0课下提交","item":"https://coder0xe.github.io/posts/p0kexia/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"P0课下提交","name":"P0课下提交","description":"P0课下提交","keywords":["计组"],"articleBody":"P0课下提交 ​\t本次P0课下提交部分全部为logisim有关内容，五个电路题目我没有一题是一遍过的QAQ,在做每个题目的过程中或多或少都会发现一些疏漏点，本篇笔记的初衷是记录一下做题思路(毕竟.circ文件不支持添加笔记)以及在做题过程中遇到的一些坑点。\n1.CRC校验码的生成 名称 方向 描述 A[7 : 0] I 8位原数据帧 B[3 : 0] I 除数 C[10 : 0] O 8位原数据帧+3位余数 1.被除数的生成 ​\t被除数为8位原数据帧 + (除数位数-1)位0，在题目中具体下来即补全为11位被除数。这时我们发现，按照题目中的提示，按照4位除法来搭建电路，而一个11位数应当可以进行8次4位补位除法(同样参考商的位数是8位可以得到答案，不要被竖式计算过程中似乎计算除法模块小于8次迷惑，做出难以名状的事情)。\n2.模二除法 ​\t在此题目中涉及到模二除法的使用，这是一个新概念，模二除法在结果上等于两位进行异或的答案，但是进行模二除法的前提是最高位需要为1(已经保证除数的最高位为1)，即保证被除数与除数的最高位相同。这样我们可以知道，能进行除法的四位数为```1xxx```,这样得到的余数为```0xxx```，型为```0xxx```的数字不满足进行模二除法的条件，需要进行借位，直到最高位变为1才进行计算，这是根据题目中给出的样例得到的。\r3.电路设计 ​\t通过以上分析我们知道，当前补全的四位能否进行模二除法的关键在于它的最高位，如果当前四位数字的最高位为1则进行模二除法，并传递余数到下一级，如果当前最高位为0则将数字左移一位，传递给下一级，如此传递直到最高位为1满足进行除法的条件。由于我们知道余数一定是三位且在进行下一级除法前需要拼接被除数的下一位，因此在四位除法中输出设计为3位。下面给出电路。\n2.主电路搭建 ​\t主电路主要实现8级除法的连接(传入下一位)，这里需要注意的是在进行输出输出时都需要进行处理，输入时在原数据后补加3位0，输出时在原数据后补加3位余数。此题用到许多的splitter。\n2.实现GRF ​\t这一题主体上的功能比较单一，即对寄存器进行简单的读写操作，但是这个题目中却有很多的细节值得细细品味。而且此题的电路图过于复杂且重复，因此只展示部分电路连接。\n1.一个弱智问题MUX与DMX ​\t对于MUX与DMX我要好好品味，毕竟Ppre挂掉就是因为对多路选择器的功能不够熟悉QAQ!。\n1.DMX ​\tDMX通常用于输入端选择输入到哪里的情况，短边连接输入信号，长边连接多个可以被选择的输入到的位置。\n端口说明:\n短边连接输入信号(data) 长边连接多个输入路径选择 腰上一个使能端口(include enable)，一个选择输入到第几个路径的输入信号(select),这里需要注意的是一些情况下可以不选择启用使能端口，在启用使能端口时，腰上会出现两个接口点，如何去区分功能？端口上有一个灰色点的是select! 2.MUX ​\tMUX通常用于选择多方数据中的一个来进行输出，长边连接多个可以进行输出的信号，短边进行输出。\n端口说明:\n短边进行输出(output)\n长边上连接多个可供进行输出的信号\n腰上一个使能端口(include enable)，一个选择输出第几路数据的信号(select)，同样，上面标记有灰色点的为选择信号。\n3.总结 ​\tDMX用于输入到哪里的选择，MUX用于输出哪个的选择。选择信号为腰上标记灰色点的端口。DMX与MUX在此题中配对放置。\n使能端的勾选视情况而定。\n2.DMX的three-state ​\t在我进行电路搭建的过程中，我习惯性的将three-state设置为no,在此次搭建过程中，由于需要向32个不同的寄存器中写入数据，我发现在写入数据时每当我向新的寄存器写入数据，之前写过的寄存器会被洗掉变回0，这是一个很奇怪的现象，知道我看了讨论区，才知道要将DMX的three-state设置为yes.这背后的原因是什么呢？\n​\t在logisim官方文档中，three-state作了如下解释：Specifies whether the unselected outputs should be floating (Yes) or zero (No).即处理没有选择的引脚的输入状态，选择yes即为floating状态，这是一个悬空状态，即不对寄存器输入数据，寄存器中原有的内容不会改变，选择no则会造成zero,即没有被选择的引脚都会输入0,这就会发生原来写入的数据被冲掉的现象。\n3.一个坑点 ​\t其实DMX的three-state已经可以算作一个坑点，这一点自己动手实验可以发现上一周期存入数据在存入新数据时被洗掉的问题，但可能不知道是three-state出了问题，但是接下来这个坑点可能更不容易被发现，那就是0号寄存器要始终输出0，这一点很容易被忽视，这一点的处理上我选择不使用统一的tunnel处理0号寄存器的使能端，而是将其直接常量化为0，这样可以保证0号寄存器的值始终为寄存器初值0.\n3. Moore与Mealy ​\t对于有限自动机类型的题型，在状态较少的情况下，最常见的情况是利用真值表进行自动绘图，当状态数特别多时，如Pre 上机的俄罗斯方块题目，就不能使用真值表，但是值得庆幸的是，本次作业的两道题目都可以通过真值表完成绘制。\n​\t对于两种自动机的辨析，我很喜欢肖利民老师上课时提到的一句话，Moore 型自动机在画真值表时，需要画两张表，下一状态逻辑和输出逻辑分开画，而 Mealy型自动机在画真值表时只需要一张表就可以解决，这是为什么呢？因为Mealy型自动机的两个逻辑模块输入是相同的， Moore型自动机两个逻辑模块的输入不同。但是实际上，当我们选择使用真值表解决问题时，由于分层次绘制的思想，我们总喜欢将下一状态逻辑和输出逻辑封装为不同的子模块，因此在实际绘制时还是相当于两张真值表。因此作业中的两道状态机题目不再给出具体电路，毕竟顶层是模板，底层是真值表。\n​\t在绘制有限自动机电路时，熟悉的流水线作业：\n绘制该种自动机的main模块（模板） 绘制status circuit 绘制output circuit ​\t从顶层电路中可以看出，Mealy与Moore的主要区别为输出上的区别。当输入后，两种状态机都会next state logic更新次态，但是对于输出，一般采用Mealy型自动机的题目会选择在时钟周期内输入，而不一定在时钟上升沿输入。\n​\t简单来说，无论在何种状态机中，一个时钟周期只有一个状态。 但是Moore机我在时钟周期内改变输入，输出不会变，因为输出只与状态有关。Mealy机在周期内改变输入，输出会变，且输出由临时输入与当前状态共同决定。状态只在时钟上升沿（一个周期开始的瞬间）发生改变。\n4.logisim导航 ​\t这题目一开始我的理解是Mealy型自动机，因为我的理解是hit信号应当是实时更新的，而arrive信号不是。这其实是很扭曲的，你说我设计的是哪一种状态机呢？hit输出信号实时更新,arrive信号等到时钟上升沿到来更新。这不是四不像吗！最关键是我还真设计出来了，hit信号直接从status逻辑中输出，arrive信号从output逻辑中输出。顶层电路实际上不满足任何一种有限自动机。这提醒我不要自己设计新种类自动机QWQ。\n​\t实际上，这题虽然没有明说请设计Moore型自动机，却已经给到了充足的暗示，撞到墙壁并将hit信号置高一周期，到达信号需要置位并保持一周期。我们知道，输出信号按照周期更新的是Moore型自动机。\n​\t这道题目为了实现hit的按照周期更新，我选择将hit看作一种状态(毕竟是否撞墙确实是一种状态)，加入到status的编码中，并作为最高位，这样就是四位状态编码(五个位置对应五个状态)。在output逻辑中对hit进行读取输出。画完状态转移图之后，对应的两个子电路真值表完成信手拈来。\n5.正则表达式匹配 ​\t此题涉及到同步复位与异步复位的概念:\n同步复位：与时钟上升沿同步复位，即时钟上升沿到来时进行复位 异步复位：复位信号到来即进行复位，常见的异步复位信号为寄存器的复位信号。 ​\t此题目中要求设计Mealy型状态机并实现同步复位，要将复位信号直接接到寄存器上这显然是不对的。我的选择是将复位信号接入到下一状态逻辑中，在复位信号为1时产生的下一状态为00，这样同样可以实现同步复位。但却不太巧妙。\n​\t讨论区中介绍了一种通过MUX选择下一状态输入到寄存器的方法，虽然两种办法本质上是相同的，但是明显这种做法更节省电路。\n​\t讨论区中还有一种做法如下：这种做法显然是不对的，这种做法中在时钟高电平时均会使复位信号有效。\n6.foti 1.主体思路 ​\t题目要求输入一个16位的单精度浮点数，输出浮点数的整数部分（有符号），用32位补码表示，超出32位则保留低位。16位单精度浮点数的编码形式为1+5+10.这种固定位数的编码很好处理，有一点像上课讲过的定点浮点数。此题中的定点即为第十位，也就是我们压根不用管移位后的结果，第十位左边的就是整数部分，右边的一律为小数部分。\n2.实现细节 1.移位 ​\t我们现在知道这就是一个移位+取位的问题。根据给出的公式，我们知道需要判断向左还是向右移位。向左还是向右可以通过comparator实现，比较exponent部分与01111的大小。\n2.补码 ​\t电路的实现很朴实，我们知道：正数的补码为原码，负数的补码为符号位不变、对应正数的原码取反再加1。在电路里即可按照定义实现：先对符号位进行判断…….\n3.对于不同输入状态的判断 ​\t这个判断让我很快联想起pre上机中的俄罗斯方块题目，这种判断五位01状态可以使用与门、或门实现，再用MUX选择输出……\n3.一个坑点 ​\t比较器要选择无符号比较，而不是2的补码比较！\n4.电路图 7.结语 ​\t两天的搭建过程乐趣无穷，思考电路的架构，细细查找错误…….最现实的是希望下周上机顺利通过！QAQ\n","wordCount":"144","inLanguage":"en","datePublished":"2023-10-02T12:56:53+08:00","dateModified":"2023-10-02T12:56:53+08:00","author":{"@type":"Person","name":"sudo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://coder0xe.github.io/posts/p0kexia/"},"publisher":{"@type":"Organization","name":"coder0xe's blog","logo":{"@type":"ImageObject","url":"https://coder0xe.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://coder0xe.github.io/ accesskey=h title="coder0xe's blog (Alt + H)">coder0xe's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://coder0xe.github.io/ title=首页><span>首页</span></a></li><li><a href=https://coder0xe.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://coder0xe.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://coder0xe.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://coder0xe.github.io/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://coder0xe.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://coder0xe.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">P0课下提交</h1><div class=post-description>P0课下提交</div><div class=post-meta><span title='2023-10-02 12:56:53 +0800 +0800'>October 2, 2023</span>&nbsp;·&nbsp;<span>1 min</span>&nbsp;·&nbsp;<span>sudo</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#p0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4 aria-label=P0课下提交>P0课下提交</a><ul><li><a href=#1crc%e6%a0%a1%e9%aa%8c%e7%a0%81%e7%9a%84%e7%94%9f%e6%88%90 aria-label=1.CRC校验码的生成>1.CRC校验码的生成</a><ul><li><a href=#1%e8%a2%ab%e9%99%a4%e6%95%b0%e7%9a%84%e7%94%9f%e6%88%90 aria-label=1.被除数的生成>1.被除数的生成</a></li><li><a href=#2%e6%a8%a1%e4%ba%8c%e9%99%a4%e6%b3%95 aria-label=2.模二除法>2.模二除法</a></li><li><a href=#3%e7%94%b5%e8%b7%af%e8%ae%be%e8%ae%a1 aria-label=3.电路设计>3.电路设计</a><ul><li><a href=#2%e4%b8%bb%e7%94%b5%e8%b7%af%e6%90%ad%e5%bb%ba aria-label=2.主电路搭建>2.主电路搭建</a></li></ul></li></ul></li><li><a href=#2%e5%ae%9e%e7%8e%b0grf aria-label=2.实现GRF>2.实现GRF</a><ul><li><a href=#1%e4%b8%80%e4%b8%aa%e5%bc%b1%e6%99%ba%e9%97%ae%e9%a2%98mux%e4%b8%8edmx aria-label=1.一个弱智问题MUX与DMX>1.一个弱智问题MUX与DMX</a><ul><li><a href=#1dmx aria-label=1.DMX>1.DMX</a></li><li><a href=#2mux aria-label=2.MUX>2.MUX</a></li><li><a href=#3%e6%80%bb%e7%bb%93 aria-label=3.总结>3.总结</a></li></ul></li><li><a href=#2dmx%e7%9a%84three-state aria-label=2.DMX的three-state>2.DMX的three-state</a></li><li><a href=#3%e4%b8%80%e4%b8%aa%e5%9d%91%e7%82%b9 aria-label=3.一个坑点>3.一个坑点</a></li></ul></li><li><a href=#3-moore%e4%b8%8emealy aria-label="3. Moore与Mealy">3. Moore与Mealy</a></li><li><a href=#4logisim%e5%af%bc%e8%88%aa aria-label=4.logisim导航>4.logisim导航</a></li><li><a href=#5%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e5%8c%b9%e9%85%8d aria-label=5.正则表达式匹配>5.正则表达式匹配</a></li><li><a href=#6foti aria-label=6.foti>6.foti</a><ul><li><a href=#1%e4%b8%bb%e4%bd%93%e6%80%9d%e8%b7%af aria-label=1.主体思路>1.主体思路</a></li><li><a href=#2%e5%ae%9e%e7%8e%b0%e7%bb%86%e8%8a%82 aria-label=2.实现细节>2.实现细节</a><ul><li><a href=#1%e7%a7%bb%e4%bd%8d aria-label=1.移位>1.移位</a></li><li><a href=#2%e8%a1%a5%e7%a0%81 aria-label=2.补码>2.补码</a></li><li><a href=#3%e5%af%b9%e4%ba%8e%e4%b8%8d%e5%90%8c%e8%be%93%e5%85%a5%e7%8a%b6%e6%80%81%e7%9a%84%e5%88%a4%e6%96%ad aria-label=3.对于不同输入状态的判断>3.对于不同输入状态的判断</a></li></ul></li><li><a href=#3%e4%b8%80%e4%b8%aa%e5%9d%91%e7%82%b9-1 aria-label=3.一个坑点>3.一个坑点</a></li><li><a href=#4%e7%94%b5%e8%b7%af%e5%9b%be aria-label=4.电路图>4.电路图</a></li></ul></li><li><a href=#7%e7%bb%93%e8%af%ad aria-label=7.结语>7.结语</a></li></ul></li></ul></div></details></div><div class=post-content><h3 id=p0课下提交><code>P0</code>课下提交<a hidden class=anchor aria-hidden=true href=#p0课下提交>#</a></h3><p>​ 本次<code>P0</code>课下提交部分全部为<code>logisim</code>有关内容，五个电路题目我没有一题是一遍过的<code>QAQ</code>,在做每个题目的过程中或多或少都会发现一些疏漏点，本篇笔记的初衷是记录一下做题思路(毕竟<code>.circ</code>文件不支持添加笔记)以及在做题过程中遇到的一些坑点。</p><h4 id=1crc校验码的生成>1.<code>CRC</code>校验码的生成<a hidden class=anchor aria-hidden=true href=#1crc校验码的生成>#</a></h4><table><thead><tr><th>名称</th><th>方向</th><th>描述</th></tr></thead><tbody><tr><td>A[7 : 0]</td><td>I</td><td>8位原数据帧</td></tr><tr><td>B[3 : 0]</td><td>I</td><td>除数</td></tr><tr><td>C[10 : 0]</td><td>O</td><td>8位原数据帧+3位余数</td></tr></tbody></table><h5 id=1被除数的生成>1.被除数的生成<a hidden class=anchor aria-hidden=true href=#1被除数的生成>#</a></h5><p>​ 被除数为8位原数据帧 + (除数位数-1)位0，在题目中具体下来即补全为11位被除数。这时我们发现，按照题目中的提示，按照4位除法来搭建电路，而一个11位数应当可以进行8次4位补位除法(同样参考商的位数是8位可以得到答案，<strong>不要被竖式计算过程中似乎计算除法模块小于8次迷惑，做出难以名状的事情</strong>)。</p><h5 id=2模二除法>2.模二除法<a hidden class=anchor aria-hidden=true href=#2模二除法>#</a></h5><img src=/img/除法.png alt=除法 style=zoom:67%>
​ 在此题目中涉及到模二除法的使用，这是一个新概念，模二除法在结果上等于两位进行异或的答案，但是进行模二除法的前提是最高位需要为1(已经保证除数的最高位为1)，即保证被除数与除数的最高位相同。这样我们可以知道，能进行除法的四位数为```1xxx```,这样得到的余数为```0xxx```，型为```0xxx```的数字不满足进行模二除法的条件，需要进行借位，直到最高位变为1才进行计算，这是根据题目中给出的样例得到的。
<img src=/img/除法.png alt=除法 style=zoom:67%><h5 id=3电路设计>3.电路设计<a hidden class=anchor aria-hidden=true href=#3电路设计>#</a></h5><img src=/img/四位除法.png alt=四位除法 style=zoom:67%><p>​ 通过以上分析我们知道，当前补全的四位能否进行模二除法的关键在于它的最高位，如果当前四位数字的最高位为1则进行模二除法，并传递余数到下一级，如果当前最高位为0则将数字左移一位，传递给下一级，如此传递直到最高位为1满足进行除法的条件。由于我们知道余数一定是三位且在进行下一级除法前需要拼接被除数的下一位，因此在四位除法中输出设计为3位。下面给出电路。</p><p><img alt=image-20231003004732125 loading=lazy src=/img/P0%E4%B8%BB%E7%94%B5%E8%B7%AF.png></p><h6 id=2主电路搭建>2.主电路搭建<a hidden class=anchor aria-hidden=true href=#2主电路搭建>#</a></h6><p>​ 主电路主要实现8级除法的连接(传入下一位)，这里需要注意的是在进行输出输出时都需要进行处理，输入时在原数据后补加3位0，输出时在原数据后补加3位余数。此题用到许多的<code>splitter</code>。</p><p><img alt=image-20231003004732125 loading=lazy src=/img/P0%E4%B8%BB%E7%94%B5%E8%B7%AF.png></p><h4 id=2实现grf>2.实现<code>GRF</code><a hidden class=anchor aria-hidden=true href=#2实现grf>#</a></h4><p>​ 这一题主体上的功能比较单一，即对寄存器进行简单的读写操作，但是这个题目中却有很多的细节值得细细品味。而且此题的电路图过于复杂且重复，因此只展示部分电路连接。</p><h5 id=1一个弱智问题mux与dmx>1.一个弱智问题<code>MUX</code>与<code>DMX</code><a hidden class=anchor aria-hidden=true href=#1一个弱智问题mux与dmx>#</a></h5><p>​ 对于<code>MUX</code>与<code>DMX</code>我要好好品味，毕竟<code>Ppre</code>挂掉就是因为对多路选择器的功能不够熟悉<code>QAQ</code>!。</p><h6 id=1dmx>1.<code>DMX</code><a hidden class=anchor aria-hidden=true href=#1dmx>#</a></h6><p>​ <code>DMX</code>通常用于输入端选择输入到哪里的情况，短边连接输入信号，长边连接多个可以被选择的输入到的位置。</p><p>端口说明:</p><ol><li>短边连接输入信号(data)</li><li>长边连接多个输入路径选择</li><li>腰上一个使能端口(include enable)，一个选择输入到第几个路径的输入信号(select),这里需要注意的是一些情况下可以不选择启用使能端口，在启用使能端口时，腰上会出现两个接口点，如何去区分功能？端口上有一个灰色点的是select!</li></ol><img src=/img/DMX.png alt=DMX style=zoom:50%><h6 id=2mux>2.<code>MUX</code><a hidden class=anchor aria-hidden=true href=#2mux>#</a></h6><p>​ <code>MUX</code>通常用于选择多方数据中的一个来进行输出，长边连接多个可以进行输出的信号，短边进行输出。</p><p>端口说明:</p><ol><li><p>短边进行输出(output)</p></li><li><p>长边上连接多个可供进行输出的信号</p></li><li><p>腰上一个使能端口(include enable)，一个选择输出第几路数据的信号(select)，同样，上面标记有灰色点的为选择信号。</p></li></ol><img src=/img/MUX.png alt=MUX style=zoom:50%><h6 id=3总结>3.总结<a hidden class=anchor aria-hidden=true href=#3总结>#</a></h6><p>​ <code>DMX</code>用于输入到哪里的选择，<code>MUX</code>用于输出哪个的选择。选择信号为腰上标记灰色点的端口。<code>DMX</code>与<code>MUX</code>在此题中配对放置。</p><p>使能端的勾选视情况而定。</p><h5 id=2dmx的three-state>2.<code>DMX</code>的three-state<a hidden class=anchor aria-hidden=true href=#2dmx的three-state>#</a></h5><p>​ 在我进行电路搭建的过程中，我习惯性的将<code>three-state</code>设置为<code>no</code>,在此次搭建过程中，由于需要向32个不同的寄存器中写入数据，我发现在写入数据时每当我向新的寄存器写入数据，之前写过的寄存器会被洗掉变回0，这是一个很奇怪的现象，知道我看了讨论区，才知道要将<code>DMX</code>的<code>three-state</code>设置为<code>yes</code>.这背后的原因是什么呢？</p><p>​ 在<code>logisim</code>官方文档中，<code>three-state</code>作了如下解释：<strong>Specifies whether the unselected outputs should be floating (Yes) or zero (No).<strong>即处理没有选择的引脚的输入状态，选择<code>yes</code>即为<code>floating</code>状态，这是一个悬空状态，即不对寄存器输入数据，寄存器中原有的内容不会改变，选择<code>no</code>则会造成</strong>zero</strong>,即没有被选择的引脚都会输入0,这就会发生原来写入的数据被冲掉的现象。</p><h5 id=3一个坑点>3.一个坑点<a hidden class=anchor aria-hidden=true href=#3一个坑点>#</a></h5><p>​ 其实<code>DMX</code>的<code>three-state</code>已经可以算作一个坑点，这一点自己动手实验可以发现上一周期存入数据在存入新数据时被洗掉的问题，但可能不知道是<code>three-state</code>出了问题，但是接下来这个坑点可能更不容易被发现，那就是0号寄存器要始终输出0，这一点很容易被忽视，这一点的处理上我选择不使用统一的<code>tunnel</code>处理0号寄存器的使能端，而是将其直接常量化为0，这样可以保证0号寄存器的值始终为寄存器初值0.</p><p><img alt=image-20231003012622107 loading=lazy src=/img/register.png></p><h4 id=3-moore与mealy>3. Moore与Mealy<a hidden class=anchor aria-hidden=true href=#3-moore与mealy>#</a></h4><p>​ 对于有限自动机类型的题型，在状态较少的情况下，最常见的情况是利用真值表进行自动绘图，当状态数特别多时，如<code>Pre</code> 上机的俄罗斯方块题目，就不能使用真值表，但是值得庆幸的是，本次作业的两道题目都可以通过真值表完成绘制。</p><p>​ 对于两种自动机的辨析，我很喜欢肖利民老师上课时提到的一句话，Moore 型自动机在画真值表时，需要画两张表，下一状态逻辑和输出逻辑分开画，而 Mealy型自动机在画真值表时只需要一张表就可以解决，这是为什么呢？因为Mealy型自动机的两个逻辑模块输入是相同的， Moore型自动机两个逻辑模块的输入不同。但是实际上，当我们选择使用真值表解决问题时，由于分层次绘制的思想，我们总喜欢将下一状态逻辑和输出逻辑封装为不同的子模块，因此在实际绘制时还是相当于两张真值表。因此作业中的两道状态机题目不再给出具体电路，毕竟顶层是模板，底层是真值表。</p><p>​ 在绘制有限自动机电路时，熟悉的流水线作业：</p><ol><li>绘制该种自动机的main模块（模板）</li><li>绘制status circuit</li><li>绘制output circuit</li></ol><img src=/img/MooreandMealy.png alt=moore style=zoom:50%><p>​ 从顶层电路中可以看出，Mealy与Moore的主要区别为输出上的区别。当输入后，两种状态机都会next state logic更新次态，但是对于输出，一般采用Mealy型自动机的题目会选择在时钟周期内输入，而不一定在时钟上升沿输入。</p><p>​ 简单来说，无论在何种状态机中，一个时钟周期只有一个状态。 但是Moore机我在时钟周期内改变输入，输出不会变，因为输出只与状态有关。Mealy机在周期内改变输入，输出会变，且输出由临时输入与当前状态共同决定。状态只在时钟上升沿（一个周期开始的瞬间）发生改变。</p><h4 id=4logisim导航>4.<code>logisim</code>导航<a hidden class=anchor aria-hidden=true href=#4logisim导航>#</a></h4><p>​ 这题目一开始我的理解是Mealy型自动机，因为我的理解是hit信号应当是实时更新的，而arrive信号不是。这其实是很扭曲的，你说我设计的是哪一种状态机呢？hit输出信号实时更新,arrive信号等到时钟上升沿到来更新。这不是四不像吗！最关键是我还真设计出来了，hit信号直接从status逻辑中输出，arrive信号从output逻辑中输出。顶层电路实际上不满足任何一种有限自动机。这提醒我不要自己设计新种类自动机<code>QWQ</code>。</p><p>​ 实际上，这题虽然没有明说请设计Moore型自动机，却已经给到了充足的暗示，<strong>撞到墙壁并将hit信号置高一周期，到达信号需要置位并保持一周期</strong>。我们知道，输出信号按照周期更新的是Moore型自动机。</p><p>​ 这道题目为了实现hit的按照周期更新，我选择将hit看作一种状态(毕竟是否撞墙确实是一种状态)，加入到status的编码中，并作为最高位，这样就是四位状态编码(五个位置对应五个状态)。在output逻辑中对hit进行读取输出。画完状态转移图之后，对应的两个子电路真值表完成信手拈来。</p><h4 id=5正则表达式匹配>5.正则表达式匹配<a hidden class=anchor aria-hidden=true href=#5正则表达式匹配>#</a></h4><p>​ 此题涉及到同步复位与异步复位的概念:</p><ul><li>同步复位：与时钟上升沿同步复位，即时钟上升沿到来时进行复位</li><li>异步复位：复位信号到来即进行复位，常见的异步复位信号为寄存器的复位信号。</li></ul><p>​ 此题目中要求设计Mealy型状态机并实现同步复位，要将复位信号直接接到寄存器上这显然是不对的。我的选择是将复位信号接入到下一状态逻辑中，在复位信号为1时产生的下一状态为00，这样同样可以实现同步复位。但却不太巧妙。</p><p>​ 讨论区中介绍了一种通过<code>MUX</code>选择下一状态输入到寄存器的方法，虽然两种办法本质上是相同的，但是明显这种做法更节省电路。</p><img src=/img/reset1.png alt=image-20231003194245381 style=zoom:50%><p>​ 讨论区中还有一种做法如下：这种做法显然是不对的，这种做法中在时钟高电平时均会使复位信号有效。</p><img src=/img/reset2.png alt=image-20231003194429068 style=zoom:50%><h4 id=6foti>6.<code>foti</code><a hidden class=anchor aria-hidden=true href=#6foti>#</a></h4><h5 id=1主体思路>1.主体思路<a hidden class=anchor aria-hidden=true href=#1主体思路>#</a></h5><p>​ 题目要求输入一个16位的单精度浮点数，输出浮点数的整数部分（有符号），用32位补码表示，超出32位则保留低位。16位单精度浮点数的编码形式为1+5+10.这种固定位数的编码很好处理，有一点像上课讲过的定点浮点数。此题中的定点即为第十位，也就是我们压根不用管移位后的结果，第十位左边的就是整数部分，右边的一律为小数部分。</p><h5 id=2实现细节>2.实现细节<a hidden class=anchor aria-hidden=true href=#2实现细节>#</a></h5><h6 id=1移位>1.移位<a hidden class=anchor aria-hidden=true href=#1移位>#</a></h6><p>​ 我们现在知道这就是一个移位+取位的问题。根据给出的公式，我们知道需要判断向左还是向右移位。向左还是向右可以通过comparator实现，比较exponent部分与01111的大小。</p><h6 id=2补码>2.补码<a hidden class=anchor aria-hidden=true href=#2补码>#</a></h6><p>​ 电路的实现很朴实，我们知道：正数的补码为原码，负数的补码为符号位不变、对应正数的原码取反再加1。在电路里即可按照定义实现：先对符号位进行判断&mldr;&mldr;.</p><h6 id=3对于不同输入状态的判断>3.对于不同输入状态的判断<a hidden class=anchor aria-hidden=true href=#3对于不同输入状态的判断>#</a></h6><p>​ 这个判断让我很快联想起<code>pre</code>上机中的俄罗斯方块题目，这种判断五位01状态可以使用与门、或门实现，再用<code>MUX</code>选择输出&mldr;&mldr;</p><h5 id=3一个坑点-1>3.一个坑点<a hidden class=anchor aria-hidden=true href=#3一个坑点-1>#</a></h5><p>​ <strong>比较器要选择无符号比较，而不是2的补码比较！</strong></p><h5 id=4电路图>4.电路图<a hidden class=anchor aria-hidden=true href=#4电路图>#</a></h5><p><img alt=image-20231003200324104 loading=lazy src=/img/int.png></p><h4 id=7结语>7.结语<a hidden class=anchor aria-hidden=true href=#7结语>#</a></h4><p>​ 两天的搭建过程乐趣无穷，思考电路的架构，细细查找错误&mldr;&mldr;.最现实的是希望下周上机顺利通过！<code>QAQ</code></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://coder0xe.github.io/tags/oct/>Oct</a></li></ul><nav class=paginav><a class=prev href=https://coder0xe.github.io/posts/p0-logisim/><span class=title>« Prev</span><br><span>P0-logisim</span>
</a><a class=next href=https://coder0xe.github.io/posts/pre/><span class=title>Next »</span><br><span>Pre上机logisim部分——俄罗斯方块</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share P0课下提交 on x" href="https://x.com/intent/tweet/?text=P0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4&amp;url=https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f&amp;hashtags=Oct"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share P0课下提交 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f&amp;title=P0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4&amp;summary=P0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4&amp;source=https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share P0课下提交 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f&title=P0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share P0课下提交 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share P0课下提交 on whatsapp" href="https://api.whatsapp.com/send?text=P0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4%20-%20https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share P0课下提交 on telegram" href="https://telegram.me/share/url?text=P0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4&amp;url=https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share P0课下提交 on ycombinator" href="https://news.ycombinator.com/submitlink?t=P0%e8%af%be%e4%b8%8b%e6%8f%90%e4%ba%a4&u=https%3a%2f%2fcoder0xe.github.io%2fposts%2fp0kexia%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://coder0xe.github.io/>coder0xe's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>